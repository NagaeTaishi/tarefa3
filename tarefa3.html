<!DOCTYPE>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ストップウォッチ</title>
        <link rel="stylesheet" href="tarefa3.css">
        <script src="jquery-3.6.0.min.js"></script>
    </head>    
    <body>
        <section class="container">
            <h1>ストップウォッチ</h1>
            <p id="timer">00:00:00:0</p>
            <div class="flex-container">
                <button id="startButton">スタート</button>
                <button id="stopButton">ストップ</button>
                <button id="resetButton">リセット</button>
            </div>
        </section>
        <script>
            let start;
            let timer_id;
            let outPut;
            //スタートボタンをクリックすると、カウントをスタート
            
            if (document.getElementById('startButton').disabled !== true){
                document.getElementById('startButton').addEventListener('click', function() {
                        start = new Date();
                        timer_id = setInterval(goTimer, 100);
                        document.getElementById('startButton').setAttribute("disabled", true);
                });
            }
            
            //ストップボタンをクリックすると、タイマーをストップ
            document.getElementById('stopButton').addEventListener('click', function(){
                clearInterval(timer_id);
            })
            //リセットボタンをクリックすると、リセット
            document.getElementById('resetButton').addEventListener('click', function(){
                document.getElementById('timer').innerHTML = '00:00:00:0';
                document.getElementById('startButton').removeAttribute("disabled", true);
            })
            
            //一桁の時だけ、0を追加する。
            let addZero = function(value){
                if (value < 10){
                    value = '0' + value;
                }
                return value;
            }
            
            
            let goTimer = function(){
                let now = new Date();
                
                let nano = now.getTime() - start.getTime();
                let milli = Math.floor(nano / 100)
                let seconds = Math.floor(milli / 10);
                let minutes = Math.floor(seconds / 60);
                let hours = Math.floor(minutes /60);
                
                milli -= seconds * 10;
                seconds -= minutes * 60;
                minutes -= hours *60;
                
                hours = addZero(hours)
                seconds = addZero(seconds)
                minutes = addZero(minutes)
                
                let outPut = hours + ':' + minutes +':' + seconds +':' + milli;
                
                document.getElementById('timer').innerHTML = outPut ;
            }
        </script>
    </body>
    
</html>    